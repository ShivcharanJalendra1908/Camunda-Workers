{
  "version": "1.0.0",
  "lastUpdated": "2025-11-06T00:00:00Z",
  "activities": [
    {
      "id": "validate-subscription",
      "displayName": "Validate Subscription",
      "description": "Validates user subscription tier and access permissions",
      "category": "infrastructure",
      "version": "1.0.0",
      "taskType": "validate-subscription",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["userId", "subscriptionTier"],
        "properties": {
          "userId": { "type": "string", "description": "Unique user identifier" },
          "subscriptionTier": { "type": "string", "enum": ["free", "basic", "premium", "enterprise"], "description": "User subscription tier" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "isValid": { "type": "boolean", "description": "Whether subscription is valid" },
          "tierLevel": { "type": "string", "description": "Validated tier level" },
          "permissions": { "type": "array", "items": { "type": "string" }, "description": "List of granted permissions" }
        }
      },
      "errorCodes": ["SUBSCRIPTION_INVALID", "SUBSCRIPTION_EXPIRED", "SUBSCRIPTION_CHECK_FAILED"],
      "timeout": "10s",
      "retries": 3,
      "workflows": ["WF_AI_CONVERSATION", "WF_FRANCHISE_APPLICATION", "WF_FRANCHISE_DETAIL_PAGE", "WF_FRANCHISE_DISCOVERY"],
      "tags": ["auth", "validation"]
    },
    {
      "id": "build-response",
      "displayName": "Build Response",
      "description": "Constructs standardized response payload for BFF callback",
      "category": "infrastructure",
      "version": "1.0.0",
      "taskType": "build-response",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["templateId", "requestId", "data"],
        "properties": {
          "templateId": { "type": "string", "description": "Identifier for the response template" },
          "requestId": { "type": "string", "description": "Unique request correlation ID" },
          "data": { "type": "object", "description": "Dynamic data to populate the template" },
          "metadata": { "type": "object", "description": "Optional metadata to include" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "response": {
            "type": "object",
            "properties": {
              "requestId": { "type": "string", "description": "Request ID" },
              "status": { "type": "string", "enum": ["success", "error"], "description": "Overall status" },
              "data": { "type": "object", "description": "The main response data" },
              "metadata": {
                "type": "object",
                "properties": {
                  "timestamp": { "type": "string", "format": "date-time", "description": "When response was built" },
                  "version": { "type": "string", "description": "API version" }
                }
              }
            }
          }
        }
      },
      "errorCodes": ["TEMPLATE_NOT_FOUND", "TEMPLATE_VALIDATION_FAILED"],
      "timeout": "10s",
      "retries": 0,
      "workflows": ["WF_AI_CONVERSATION", "WF_FRANCHISE_APPLICATION", "WF_FRANCHISE_DETAIL_PAGE", "WF_FRANCHISE_DISCOVERY"],
      "tags": ["response", "template"]
    },
    {
      "id": "select-template",
      "displayName": "Select Template",
      "description": "Determines appropriate response template based on context",
      "category": "infrastructure",
      "version": "1.0.0",
      "taskType": "select-template",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["subscriptionTier"],
        "properties": {
          "bibId": { "type": "string", "description": "BIB ID (optional)" },
          "subscriptionTier": { "type": "string", "enum": ["free", "basic", "premium", "enterprise"], "description": "User's subscription tier" },
          "routePath": { "type": "string", "description": "Current route path" },
          "templateType": { "type": "string", "description": "Hint for template type (e.g., 'ai-response')" },
          "confidence": { "type": "number", "minimum": 0, "maximum": 1, "description": "Confidence score for AI responses" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "selectedTemplateId": { "type": "string", "description": "ID of the chosen template" }
        }
      },
      "errorCodes": ["TEMPLATE_SELECTION_FAILED"],
      "timeout": "10s",
      "retries": 0,
      "workflows": ["WF_AI_CONVERSATION", "WF_FRANCHISE_DETAIL_PAGE", "WF_FRANCHISE_DISCOVERY"],
      "tags": ["template", "routing"]
    },
    {
      "id": "query-postgresql",
      "displayName": "Query PostgreSQL",
      "description": "Generic PostgreSQL query executor with parameterized query types",
      "category": "data-access",
      "version": "1.0.0",
      "taskType": "query-postgresql",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["queryType"],
        "properties": {
          "queryType": { "type": "string", "enum": ["franchise_full_details", "franchise_outlets", "franchise_verification", "franchise_details", "user_profile"], "description": "Type of query to execute" },
          "franchiseId": { "type": "string", "description": "ID for single franchise queries" },
          "franchiseIds": { "type": "array", "items": { "type": "string" }, "description": "IDs for multi-franchise queries" },
          "userId": { "type": "string", "description": "ID for user queries" },
          "filters": { "type": "object", "description": "Additional filters for the query" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "data": { "type": ["object", "array"], "description": "Query results" },
          "rowCount": { "type": "integer", "description": "Number of rows affected/returned" },
          "queryExecutionTime": { "type": "integer", "description": "Time taken in milliseconds" }
        }
      },
      "errorCodes": ["DATABASE_CONNECTION_FAILED", "QUERY_EXECUTION_FAILED", "QUERY_TIMEOUT", "INVALID_QUERY_TYPE"],
      "timeout": "30s",
      "retries": 3,
      "workflows": ["WF_FRANCHISE_DETAIL_PAGE", "WF_FRANCHISE_DISCOVERY", "WF_FRANCHISE_APPLICATION"],
      "tags": ["database", "postgresql"]
    },
    {
      "id": "query-elasticsearch",
      "displayName": "Query Elasticsearch",
      "description": "Generic Elasticsearch query executor",
      "category": "data-access",
      "version": "1.0.0",
      "taskType": "query-elasticsearch",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["indexName", "queryType", "filters"],
        "properties": {
          "indexName": { "type": "string", "description": "Target Elasticsearch index" },
          "queryType": { "type": "string", "enum": ["franchise_index", "related_franchises"], "description": "Type of search query" },
          "filters": { "type": "object", "description": "Query filters" },
          "franchiseId": { "type": "string", "description": "Franchise ID for related searches" },
          "category": { "type": "string", "description": "Category for filtering" },
          "pagination": {
            "type": "object",
            "properties": {
              "from": { "type": "integer", "description": "Pagination offset" },
              "size": { "type": "integer", "description": "Page size" }
            }
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "data": { "type": "array", "description": "Search results" },
          "totalHits": { "type": "integer", "description": "Total number of hits" },
          "maxScore": { "type": "number", "description": "Highest relevance score" },
          "took": { "type": "integer", "description": "Time taken in milliseconds" }
        }
      },
      "errorCodes": ["ELASTICSEARCH_CONNECTION_FAILED", "SEARCH_QUERY_FAILED", "SEARCH_TIMEOUT", "INDEX_NOT_FOUND"],
      "timeout": "30s",
      "retries": 3,
      "workflows": ["WF_FRANCHISE_DETAIL_PAGE", "WF_FRANCHISE_DISCOVERY"],
      "tags": ["search", "elasticsearch"]
    },
    {
      "id": "parse-search-filters",
      "displayName": "Parse Search Filters",
      "description": "Parses and normalizes search query parameters",
      "category": "business-logic",
      "version": "1.0.0",
      "taskType": "parse-search-filters",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["rawFilters"],
        "properties": {
          "rawFilters": { "type": "object", "description": "Raw filter parameters from request" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "parsedFilters": {
            "type": "object",
            "properties": {
              "categories": { "type": "array", "items": { "type": "string" }, "description": "Parsed category filters" },
              "investmentRange": {
                "type": "object",
                "properties": {
                  "min": { "type": "integer", "description": "Minimum investment" },
                  "max": { "type": "integer", "description": "Maximum investment" }
                }
              },
              "locations": { "type": "array", "items": { "type": "string" }, "description": "Parsed location filters" },
              "keywords": { "type": "string", "description": "Keywords for search" },
              "sortBy": { "type": "string", "description": "Sort criteria" },
              "pagination": {
                "type": "object",
                "properties": {
                  "page": { "type": "integer", "description": "Page number" },
                  "size": { "type": "integer", "description": "Page size" }
                }
              }
            }
          }
        }
      },
      "errorCodes": ["INVALID_FILTER_FORMAT"],
      "timeout": "10s",
      "retries": 0,
      "workflows": ["WF_FRANCHISE_DISCOVERY"],
      "tags": ["search", "parsing"]
    },
    {
      "id": "apply-relevance-ranking",
      "displayName": "Apply Relevance Ranking",
      "description": "Applies custom ranking to search results",
      "category": "business-logic",
      "version": "1.0.0",
      "taskType": "apply-relevance-ranking",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["searchResults", "detailsData", "userProfile"],
        "properties": {
          "searchResults": { "type": "array", "description": "Results from Elasticsearch" },
          "detailsData": { "type": "array", "description": "Detailed data from PostgreSQL" },
          "userProfile": { "type": "object", "description": "User profile for personalization" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "rankedFranchises": { "type": "array", "description": "Franchises sorted by relevance score" }
        }
      },
      "errorCodes": ["RANKING_FAILED"],
      "timeout": "10s",
      "retries": 0,
      "workflows": ["WF_FRANCHISE_DISCOVERY"],
      "tags": ["ranking", "relevance"]
    },
    {
      "id": "calculate-match-score",
      "displayName": "Calculate Match Score",
      "description": "Calculates seeker-franchise compatibility score",
      "category": "business-logic",
      "version": "1.0.0",
      "taskType": "calculate-match-score",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["userId", "franchiseData", "userProfile"],
        "properties": {
          "userId": { "type": "string", "description": "User ID" },
          "franchiseData": { "type": "object", "description": "Franchise details" },
          "userProfile": { "type": "object", "description": "User profile" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "matchScore": { "type": "integer", "minimum": 0, "maximum": 100, "description": "Compatibility score" },
          "matchFactors": {
            "type": "object",
            "properties": {
              "financialFit": { "type": "integer", "minimum": 0, "maximum": 100 },
              "experienceFit": { "type": "integer", "minimum": 0, "maximum": 100 },
              "locationFit": { "type": "integer", "minimum": 0, "maximum": 100 },
              "interestFit": { "type": "integer", "minimum": 0, "maximum": 100 }
            }
          }
        }
      },
      "errorCodes": ["MATCH_SCORE_FAILED"],
      "timeout": "10s",
      "retries": 0,
      "workflows": ["WF_FRANCHISE_DETAIL_PAGE"],
      "tags": ["matching", "scoring"]
    },
    {
      "id": "validate-application-data",
      "displayName": "Validate Application Data",
      "description": "Validates franchise application data",
      "category": "business-logic",
      "version": "1.0.0",
      "taskType": "validate-application-data",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["applicationData", "franchiseId"],
        "properties": {
          "applicationData": {
            "type": "object",
            "properties": {
              "personalInfo": { "type": "object" },
              "financialInfo": { "type": "object" },
              "experience": { "type": "object" }
            }
          },
          "franchiseId": { "type": "string", "description": "Target franchise ID" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "isValid": { "type": "boolean", "description": "Is the data valid?" },
          "validatedData": { "type": "object", "description": "Cleaned and validated data" },
          "validationErrors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "field": { "type": "string", "description": "Field name" },
                "code": { "type": "string", "description": "Error code" },
                "message": { "type": "string", "description": "Error message" }
              }
            }
          }
        }
      },
      "errorCodes": ["APPLICATION_VALIDATION_FAILED"],
      "timeout": "10s",
      "retries": 0,
      "workflows": ["WF_FRANCHISE_APPLICATION"],
      "tags": ["validation", "application"]
    },
    {
      "id": "check-readiness-score",
      "displayName": "Check Readiness Score",
      "description": "Calculates franchise seeker readiness score",
      "category": "business-logic",
      "version": "1.0.0",
      "taskType": "check-readiness-score",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["userId", "applicationData"],
        "properties": {
          "userId": { "type": "string", "description": "User ID" },
          "applicationData": { "type": "object", "description": "Application data" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "readinessScore": { "type": "integer", "minimum": 0, "maximum": 100, "description": "Readiness score" },
          "qualificationLevel": { "type": "string", "enum": ["low", "medium", "high", "excellent"], "description": "Qualification level" },
          "scoreBreakdown": {
            "type": "object",
            "properties": {
              "financial": { "type": "integer", "minimum": 0, "maximum": 100 },
              "experience": { "type": "integer", "minimum": 0, "maximum": 100 },
              "commitment": { "type": "integer", "minimum": 0, "maximum": 100 },
              "compatibility": { "type": "integer", "minimum": 0, "maximum": 100 }
            }
          }
        }
      },
      "errorCodes": ["READINESS_SCORE_FAILED"],
      "timeout": "10s",
      "retries": 0,
      "workflows": ["WF_FRANCHISE_APPLICATION"],
      "tags": ["scoring", "readiness"]
    },
    {
      "id": "check-priority-routing",
      "displayName": "Check Priority Routing",
      "description": "Determines application routing priority",
      "category": "business-logic",
      "version": "1.0.0",
      "taskType": "check-priority-routing",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["franchiseId"],
        "properties": {
          "franchiseId": { "type": "string", "description": "Franchise ID" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "isPremiumFranchisor": { "type": "boolean", "description": "Is the franchisor premium?" },
          "routingPriority": { "type": "string", "enum": ["high", "medium", "low"], "description": "Routing priority" }
        }
      },
      "errorCodes": ["PRIORITY_ROUTING_FAILED"],
      "timeout": "10s",
      "retries": 0,
      "workflows": ["WF_FRANCHISE_APPLICATION"],
      "tags": ["routing", "priority"]
    },
    {
      "id": "create-application-record",
      "displayName": "Create Application Record",
      "description": "Creates franchise application record in database",
      "category": "business-logic",
      "version": "1.0.0",
      "taskType": "create-application-record",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["seekerId", "franchiseId", "applicationData", "readinessScore", "priority"],
        "properties": {
          "seekerId": { "type": "string", "description": "Seeker ID" },
          "franchiseId": { "type": "string", "description": "Franchise ID" },
          "applicationData": { "type": "object", "description": "Application data" },
          "readinessScore": { "type": "integer", "description": "Readiness score" },
          "priority": { "type": "string", "description": "Priority level" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "applicationId": { "type": "string", "description": "Generated application ID" },
          "applicationStatus": { "type": "string", "description": "Initial status" },
          "createdAt": { "type": "string", "format": "date-time", "description": "Creation timestamp" }
        }
      },
      "errorCodes": ["DATABASE_INSERT_FAILED", "DUPLICATE_APPLICATION"],
      "timeout": "10s",
      "retries": 3,
      "workflows": ["WF_FRANCHISE_APPLICATION"],
      "tags": ["persistence", "application"]
    },
    {
      "id": "send-notification",
      "displayName": "Send Notification",
      "description": "Sends notifications via AWS SES/SNS",
      "category": "business-logic",
      "version": "1.0.0",
      "taskType": "send-notification",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["recipientId", "recipientType", "notificationType"],
        "properties": {
          "recipientId": { "type": "string", "description": "ID of the recipient" },
          "recipientType": { "type": "string", "enum": ["franchisor", "seeker"], "description": "Type of recipient" },
          "notificationType": { "type": "string", "enum": ["new_application", "application_submitted"], "description": "Type of notification" },
          "applicationId": { "type": "string", "description": "Related application ID (optional)" },
          "priority": { "type": "string", "description": "Priority level (optional)" },
          "metadata": { "type": "object", "description": "Additional metadata (optional)" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "notificationId": { "type": "string", "description": "Generated notification ID" },
          "status": { "type": "string", "enum": ["sent", "failed", "disabled"], "description": "Delivery status" },
          "sentAt": { "type": "string", "format": "date-time", "description": "Timestamp of sending" }
        }
      },
      "errorCodes": ["NOTIFICATION_SEND_FAILED"],
      "timeout": "30s",
      "retries": 3,
      "workflows": ["WF_FRANCHISE_APPLICATION"],
      "tags": ["notification", "aws"]
    },
    {
      "id": "parse-user-intent",
      "displayName": "Parse User Intent",
      "description": "Analyzes user query intent using NLP/AI",
      "category": "ai-ml",
      "version": "1.0.0",
      "taskType": "parse-user-intent",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["question"],
        "properties": {
          "question": { "type": "string", "description": "User's question" },
          "context": { "type": "object", "description": "Conversation context (optional)" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "intentAnalysis": {
            "type": "object",
            "properties": {
              "primaryIntent": { "type": "string", "description": "Primary detected intent" },
              "confidence": { "type": "number", "minimum": 0, "maximum": 1, "description": "Confidence in intent" }
            }
          },
          "dataSources": { "type": "array", "items": { "type": "string" }, "description": "Data sources needed" },
          "entities": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": { "type": "string", "description": "Entity type (e.g., franchise, location)" },
                "value": { "type": "string", "description": "Entity value" }
              }
            }
          }
        }
      },
      "errorCodes": ["INTENT_PARSING_FAILED", "INTENT_API_TIMEOUT"],
      "timeout": "10s",
      "retries": 2,
      "workflows": ["WF_AI_CONVERSATION"],
      "tags": ["ai", "nlp", "intent"]
    },
    {
      "id": "query-internal-data",
      "displayName": "Query Internal Data",
      "description": "Retrieves internal franchise data based on extracted entities",
      "category": "ai-ml",
      "version": "1.0.0",
      "taskType": "query-internal-data",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["entities", "dataSources"],
        "properties": {
          "entities": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": { "type": "string", "description": "Entity type" },
                "value": { "type": "string", "description": "Entity value" }
              }
            }
          },
          "dataSources": { "type": "array", "items": { "type": "string" }, "description": "Requested data sources" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "internalData": { "type": "object", "description": "Aggregated internal data" }
        }
      },
      "errorCodes": ["INTERNAL_DATA_QUERY_FAILED"],
      "timeout": "10s",
      "retries": 2,
      "workflows": ["WF_AI_CONVERSATION"],
      "tags": ["ai", "data", "query"]
    },
    {
      "id": "enrich-web-search",
      "displayName": "Enrich With Web Search",
      "description": "Enriches response with external web data",
      "category": "ai-ml",
      "version": "1.0.0",
      "taskType": "enrich-web-search",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["question", "entities"],
        "properties": {
          "question": { "type": "string", "description": "Original question" },
          "entities": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": { "type": "string", "description": "Entity type" },
                "value": { "type": "string", "description": "Entity value" }
              }
            }
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "webData": {
            "type": "object",
            "properties": {
              "sources": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "url": { "type": "string", "format": "uri", "description": "Source URL" },
                    "title": { "type": "string", "description": "Source title" },
                    "snippet": { "type": "string", "description": "Relevant snippet" },
                    "relevance": { "type": "number", "minimum": 0, "maximum": 1, "description": "Relevance score" }
                  }
                }
              },
              "summary": { "type": "string", "description": "Brief summary of results" }
            }
          }
        }
      },
      "errorCodes": ["WEB_SEARCH_TIMEOUT"],
      "timeout": "3s", 
      "retries": 0,
      "workflows": ["WF_AI_CONVERSATION"],
      "tags": ["ai", "web", "search"]
    },
    {
      "id": "llm-synthesis",
      "displayName": "LLM Synthesis",
      "description": "Synthesizes final AI response using LLM",
      "category": "ai-ml",
      "version": "1.0.0",
      "taskType": "llm-synthesis",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["question", "internalData", "webData", "intent"],
        "properties": {
          "question": { "type": "string", "description": "Original question" },
          "internalData": { "type": "object", "description": "Data from internal sources" },
          "webData": { "type": "object", "description": "Data from web search" },
          "intent": { "type": "object", "description": "Parsed intent object" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "llmResponse": { "type": "string", "description": "Generated response text" },
          "confidence": { "type": "number", "minimum": 0, "maximum": 1, "description": "Confidence in response" },
          "sources": { "type": "array", "items": { "type": "string" }, "description": "Cited sources" }
        }
      },
      "errorCodes": ["LLM_TIMEOUT", "LLM_SYNTHESIS_FAILED"],
      "timeout": "5s", 
      "retries": 1,
      "workflows": ["WF_AI_CONVERSATION"],
      "tags": ["ai", "llm", "synthesis"]
    },
    {
      "id": "auth-signin-google",
      "displayName": "Auth Sign-In Google",
      "description": "Handles user sign-in via Google OAuth",
      "category": "authentication",
      "version": "1.0.0",
      "taskType": "auth.signin.google",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["authCode"],
        "properties": {
          "authCode": { "type": "string", "description": "Google OAuth authorization code" },
          "email": { "type": "string", "format": "email", "description": "User email (optional)" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean", "description": "Was sign-in successful?" },
          "userId": { "type": "string", "description": "User ID in our system" },
          "email": { "type": "string", "format": "email", "description": "User email" },
          "firstName": { "type": "string", "description": "User's first name" },
          "lastName": { "type": "string", "description": "User's last name" },
          "token": { "type": "string", "description": "Authentication token" }
        }
      },
      "errorCodes": ["GOOGLE_OAUTH_ERROR", "KEYCLOAK_ERROR", "USER_NOT_FOUND"],
      "timeout": "10s",
      "retries": 3,
      "workflows": [],
      "tags": ["auth", "oauth", "google"]
    },
    {
      "id": "auth.signin.linkedin",
      "taskType": "auth.signin.linkedin",
      "displayName": "LinkedIn Sign-In",
      "description": "Authenticate user via LinkedIn OAuth 2.0 and create/retrieve user in Keycloak",
      "category": "auth",
      "version": "1.0.0",
      "status": "active",
      "implementation": "internal/workers/auth/auth-signin-linkedin",
      "inputSchema": {
        "type": "object",
        "required": ["authCode"],
        "properties": {
          "authCode": {
            "type": "string",
            "description": "LinkedIn OAuth authorization code",
            "minLength": 10,
            "maxLength": 1000
          },
          "email": {
            "type": "string",
            "description": "Optional email hint for user identification",
            "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
          }
        },
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "required": ["success", "userId", "email", "token"],
        "properties": {
          "success": {
            "type": "boolean",
            "description": "Authentication result"
          },
          "userId": {
            "type": "string",
            "description": "Keycloak user ID"
          },
          "email": {
            "type": "string",
            "description": "User email address"
          },
          "firstName": {
            "type": "string",
            "description": "User first name from LinkedIn"
          },
          "lastName": {
            "type": "string",
            "description": "User last name from LinkedIn"
          },
          "token": {
            "type": "string",
            "description": "OAuth access token"
          },
          "timestamp": {
            "type": "string",
            "description": "ISO 8601 timestamp"
          }
        }
      },
      "errorCodes": [
        {
          "code": "VALIDATION_FAILED",
          "description": "Input validation failed",
          "retryable": false
        },
        {
          "code": "MISSING_PARAMETER",
          "description": "Required parameter is missing",
          "retryable": false
        },
        {
          "code": "LINKEDIN_OAUTH_ERROR",
          "description": "Failed to exchange OAuth code for token",
          "retryable": true
        },
        {
          "code": "LINKEDIN_API_ERROR",
          "description": "LinkedIn API request failed",
          "retryable": true
        },
        {
          "code": "KEYCLOAK_ERROR",
          "description": "Keycloak user operation failed",
          "retryable": false
        },
        {
          "code": "INTERNAL_ERROR",
          "description": "Internal server error",
          "retryable": false
        }
      ],
      "metadata": {
        "owner": "auth-team",
        "sla": "500ms",
        "tags": ["authentication", "oauth", "linkedin", "social-login"]
      }
    },
    {
      "id": "auth-signup-google",
      "displayName": "Auth Sign-Up Google",
      "description": "Handles user sign-up via Google OAuth",
      "category": "authentication",
      "version": "1.0.0",
      "taskType": "auth.signup.google",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["authCode"],
        "properties": {
          "authCode": { "type": "string", "description": "Google OAuth authorization code" },
          "email": { "type": "string", "format": "email", "description": "User email (optional)" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean", "description": "Was sign-up successful?" },
          "userId": { "type": "string", "description": "User ID in our system" },
          "email": { "type": "string", "format": "email", "description": "User email" },
          "firstName": { "type": "string", "description": "User's first name" },
          "lastName": { "type": "string", "description": "User's last name" },
          "token": { "type": "string", "description": "Authentication token" }
        }
      },
      "errorCodes": ["GOOGLE_OAUTH_ERROR", "KEYCLOAK_ERROR", "ZOHO_CRM_ERROR"],
      "timeout": "10s",
      "retries": 3,
      "workflows": [],
      "tags": ["auth", "oauth", "google", "registration"]
    },
    {
      "id": "auth-signup-linkedin",
      "displayName": "Auth Sign-Up LinkedIn",
      "description": "Handles user sign-up via LinkedIn OAuth",
      "category": "authentication",
      "version": "1.0.0",
      "taskType": "auth.signup.linkedin",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["authCode"],
        "properties": {
          "authCode": { "type": "string", "description": "LinkedIn OAuth authorization code" },
          "email": { "type": "string", "format": "email", "description": "User email (optional)" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean", "description": "Was sign-up successful?" },
          "userId": { "type": "string", "description": "User ID in our system" },
          "email": { "type": "string", "format": "email", "description": "User email" },
          "firstName": { "type": "string", "description": "User's first name" },
          "lastName": { "type": "string", "description": "User's last name" },
          "token": { "type": "string", "description": "Authentication token" }
        }
      },
      "errorCodes": ["LINKEDIN_OAUTH_ERROR", "LINKEDIN_API_ERROR", "KEYCLOAK_ERROR", "ZOHO_CRM_ERROR"],
      "timeout": "10s",
      "retries": 3,
      "workflows": [],
      "tags": ["auth", "oauth", "linkedin", "registration"]
    },
    {
      "id": "auth-logout",
      "displayName": "Auth Logout",
      "description": "Handles user logout process",
      "category": "authentication",
      "version": "1.0.0",
      "taskType": "auth.logout",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["userId", "refreshToken"],
        "properties": {
          "userId": { "type": "string", "description": "User ID" },
          "refreshToken": { "type": "string", "description": "Current refresh token" },
          "accessToken": { "type": "string", "description": "Current access token (optional)" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean", "description": "Was logout successful?" },
          "message": { "type": "string", "description": "Status message" }
        }
      },
      "errorCodes": ["LOGOUT_FAILED"],
      "timeout": "5s",
      "retries": 1,
      "workflows": [],
      "tags": ["auth", "session"]
    },
    {
      "id": "captcha-verify",
      "displayName": "Captcha Verify",
      "description": "Verifies CAPTCHA challenge responses",
      "category": "security",
      "version": "1.0.0",
      "taskType": "security.captcha.verify",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["captchaId", "captchaValue"],
        "properties": {
          "captchaId": { "type": "string", "description": "CAPTCHA challenge ID" },
          "captchaValue": { "type": "string", "description": "User-provided solution" },
          "clientIP": { "type": "string", "format": "ipv4", "description": "Client IP address" },
          "userAgent": { "type": "string", "description": "Client user agent" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "valid": { "type": "boolean", "description": "Is the CAPTCHA valid?" },
          "score": { "type": "number", "minimum": 0, "maximum": 1, "description": "Confidence score" },
          "retryCount": { "type": "integer", "description": "Number of attempts" },
          "errorCode": { "type": "string", "description": "Error code if invalid" },
          "errorMessage": { "type": "string", "description": "Error message if invalid" }
        }
      },
      "errorCodes": ["CAPTCHA_NOT_FOUND", "CAPTCHA_EXPIRED", "INVALID_CAPTCHA", "MAX_ATTEMPTS_EXCEEDED"],
      "timeout": "5s",
      "retries": 0,
      "workflows": [],
      "tags": ["security", "bot-protection"]
    },
    {
      "id": "crm-user-create",
      "displayName": "CRM User Create",
      "description": "Creates a user contact in the CRM system (e.g., Zoho)",
      "category": "integration",
      "version": "1.0.0",
      "taskType": "integration.crm.user.create",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["email", "firstName", "lastName"],
        "properties": {
          "email": { "type": "string", "format": "email", "description": "User's email" },
          "firstName": { "type": "string", "description": "User's first name" },
          "lastName": { "type": "string", "description": "User's last name" },
          "phone": { "type": "string", "description": "User's phone number (optional)" },
          "source": { "type": "string", "description": "How the user was acquired (e.g., 'Google Signup')" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "contactId": { "type": "string", "description": "ID of the created contact in CRM" },
          "success": { "type": "boolean", "description": "Was creation successful?" }
        }
      },
      "errorCodes": ["ZOHO_CRM_ERROR", "CRM_DUPLICATE_CONTACT"],
      "timeout": "10s",
      "retries": 3,
      "workflows": [],
      "tags": ["integration", "crm", "zoho"]
    },
    {
      "id": "email-send",
      "displayName": "Email Send",
      "description": "Sends emails using AWS SES",
      "category": "integration",
      "version": "1.0.0",
      "taskType": "integration.email.send",
      "implementationStatus": "completed",
      "inputSchema": {
        "type": "object",
        "required": ["to", "subject", "body"],
        "properties": {
          "to": { "type": "string", "format": "email", "description": "Recipient email address" },
          "subject": { "type": "string", "description": "Email subject" },
          "body": { "type": "string", "description": "Email body content" },
          "cc": { "type": "string", "format": "email", "description": "CC address (optional)" },
          "bcc": { "type": "string", "format": "email", "description": "BCC address (optional)" }
        }
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "sent": { "type": "boolean", "description": "Was the email sent?" },
          "messageId": { "type": "string", "description": "AWS SES message ID" }
        }
      },
      "errorCodes": ["SMTP_ERROR", "EMAIL_SEND_FAILED"],
      "timeout": "30s",
      "retries": 3,
      "workflows": [],
      "tags": ["integration", "email", "aws", "ses"]
    }
  ]
}